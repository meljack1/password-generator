const generateBtn = document.querySelector("#generate");

// Determines length of password
function getLength() {
  let length = Number(prompt("How many characters do you want in your password? Type a number between 8 and 128."));
  const isFloatingPoint = Number(length) === length && length % 1 !== 0;
  while (length < 8 || length > 128 || isNaN(length) || isFloatingPoint) {
    length = Number(prompt("Please try again and type a whole number between 8 and 128!"));
  } 
  return length;
}

// Determines which characters to use in password
function getCharset() {
  const charset = {
  }
  let charsetString = "";

  charset.lowerCase = confirm("Include lower case letters?");
  charset.upperCase = confirm("Include upper case letters?");
  charset.numbers = confirm("Include numbers?");
  charset.special = confirm("Include special characters?");

  if (charset.lowerCase) {
    charsetString += "abcdefghijklmnopqrstuvwxyz";
  }
  if (charset.upperCase) {
    charsetString += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
  }
  if (charset.numbers) {
    charsetString += "1234567890";
  }
  if (charset.special) {
    charsetString += "!#$%&'()*+,-./:;<=>?@[\]^_`{|}~";
  }
  return charsetString;
}

// Generates random password using parameters generated by getLength() and getCharset()

function generatePassword() {
  const length = getLength();
  let charsetString = getCharset();

  if (charsetString == "") {
    alert("Please select at least one valid character type!");
    return "";
  }

  let password = "";
  
  for (let i=0; i<length; i++) {
    password += charsetString[Math.floor(Math.random() * charsetString.length)];
  }
  return password;
} 

// Write password to the #password input
function writePassword() {
  const password = generatePassword();
  const passwordText = document.querySelector("#password");

  passwordText.value = password;

}

// Add event listener to generate button
generateBtn.addEventListener("click", writePassword);
